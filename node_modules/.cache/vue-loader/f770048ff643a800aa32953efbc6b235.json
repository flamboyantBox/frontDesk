{"remainingRequest":"C:\\Users\\Asua\\Desktop\\冯子君_23届_毕业设计\\template01\\solarBlog\\solarBlog-web\\frontDesk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Asua\\Desktop\\冯子君_23届_毕业设计\\template01\\solarBlog\\solarBlog-web\\frontDesk\\src\\components\\model\\LoginModel.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Asua\\Desktop\\冯子君_23届_毕业设计\\template01\\solarBlog\\solarBlog-web\\frontDesk\\src\\components\\model\\LoginModel.vue","mtime":1665818673958},{"path":"C:\\Users\\Asua\\Desktop\\冯子君_23届_毕业设计\\template01\\solarBlog\\solarBlog-web\\frontDesk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657531754241},{"path":"C:\\Users\\Asua\\Desktop\\冯子君_23届_毕业设计\\template01\\solarBlog\\solarBlog-web\\frontDesk\\node_modules\\babel-loader\\lib\\index.js","mtime":1657531760527},{"path":"C:\\Users\\Asua\\Desktop\\冯子君_23届_毕业设计\\template01\\solarBlog\\solarBlog-web\\frontDesk\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1657531780205},{"path":"C:\\Users\\Asua\\Desktop\\冯子君_23届_毕业设计\\template01\\solarBlog\\solarBlog-web\\frontDesk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657531754241},{"path":"C:\\Users\\Asua\\Desktop\\冯子君_23届_毕业设计\\template01\\solarBlog\\solarBlog-web\\frontDesk\\node_modules\\vue-loader\\lib\\index.js","mtime":1657531777312}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2VtYWlsTG9naW59IGZyb20gIi4uLy4uL2FwaS91c2VyIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXNlcm5hbWU6ICIiLA0KICAgICAgcGFzc3dvcmQ6ICIiLA0KICAgICAgc2hvdzogZmFsc2UNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGxvZ2luRmxhZzogew0KICAgICAgc2V0KHZhbHVlKSB7DQogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmxvZ2luRmxhZyA9IHZhbHVlOw0KICAgICAgfSwNCiAgICAgIGdldCgpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmxvZ2luRmxhZzsNCiAgICAgIH0NCiAgICB9LA0KICAgIGlzTW9iaWxlKCkgew0KICAgICAgY29uc3QgY2xpZW50V2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7DQogICAgICBpZiAoY2xpZW50V2lkdGggPiA5NjApIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHRydWU7DQogICAgfSwNCiAgICBzb2NpYWxMb2dpbkxpc3QoKSB7DQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYmxvZ0luZm8ud2Vic2l0ZUNvbmZpZy5zb2NpYWxMb2dpbkxpc3Q7DQogICAgfSwNCiAgICBzaG93TG9naW4oKSB7DQogICAgICByZXR1cm4gZnVuY3Rpb24odHlwZSkgew0KICAgICAgICByZXR1cm4gdGhpcy5zb2NpYWxMb2dpbkxpc3QuaW5kZXhPZih0eXBlKSAhPT0gLTE7DQogICAgICB9Ow0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG9wZW5SZWdpc3RlcigpIHsNCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmxvZ2luRmxhZyA9IGZhbHNlOw0KICAgICAgdGhpcy4kc3RvcmUuc3RhdGUucmVnaXN0ZXJGbGFnID0gdHJ1ZTsNCiAgICB9LA0KICAgIG9wZW5Gb3JnZXQoKSB7DQogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sb2dpbkZsYWcgPSBmYWxzZTsNCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmZvcmdldEZsYWcgPSB0cnVlOw0KICAgIH0sDQogICAgbG9naW4oKSB7DQogICAgICB2YXIgcmVnID0gL15bQS1aYS16MC05XHU0ZTAwLVx1OWZhNV0rQFthLXpBLVowLTlfLV0rKFwuW2EtekEtWjAtOV8tXSspKyQvOw0KICAgICAgaWYgKCFyZWcudGVzdCh0aGlzLnVzZXJuYW1lKSkgew0KICAgICAgICB0aGlzLiR0b2FzdCh7IHR5cGU6ICJlcnJvciIsIG1lc3NhZ2U6ICLpgq7nrrHmoLzlvI/kuI3mraPnoa4iIH0pOw0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgICBpZiAodGhpcy5wYXNzd29yZC50cmltKCkubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHRoaXMuJHRvYXN0KHsgdHlwZTogImVycm9yIiwgbWVzc2FnZTogIuWvhueggeS4jeiDveS4uuepuiIgfSk7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOw0KICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmDQogICAgICB2YXIgY2FwdGNoYSA9IG5ldyBUZW5jZW50Q2FwdGNoYSh0aGF0LmNvbmZpZy5URU5DRU5UX0NBUFRDSEEsIGZ1bmN0aW9uKHJlcykgew0KICAgICAgICBpZiAocmVzLnJldCA9PT0gMCkgew0KICAgICAgICAgIC8v5Y+R6YCB55m75b2V6K+35rGCDQogICAgICAgICAgbGV0IHBhcmFtID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgIHBhcmFtLmFwcGVuZCgidXNlcm5hbWUiLCB0aGF0LnVzZXJuYW1lKTsNCiAgICAgICAgICBwYXJhbS5hcHBlbmQoInBhc3N3b3JkIiwgdGhhdC5wYXNzd29yZCk7DQogICAgICAgICAgcGFyYW0uYXBwZW5kKCJsb2dpblR5cGUiLCAxKTsNCiAgICAgICAgICBlbWFpbExvZ2luKHsNCiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGF0LnVzZXJuYW1lLA0KICAgICAgICAgICAgcGFzc3dvcmQ6IHRoYXQucGFzc3dvcmQsDQogICAgICAgICAgICBsb2dpblR5cGU6IDENCiAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygn55m75b2VcmVzJyxyZXMpDQogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgew0KDQogICAgICAgICAgICAgIHRoYXQudXNlcm5hbWUgPSAiIjsNCiAgICAgICAgICAgICAgdGhhdC5wYXNzd29yZCA9ICIiOw0KICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZGF0YSIsIHJlcy5kYXRhKQ0KICAgICAgICAgICAgICB0aGF0LiRzdG9yZS5jb21taXQoImxvZ2luIiwgcmVzLmRhdGEudXNlckluZm8pOw0KICAgICAgICAgICAgICB0aGF0LiRzdG9yZS5jb21taXQoImNsb3NlTW9kZWwiKTsNCiAgICAgICAgICAgICAgdGhhdC4kdG9hc3QoeyB0eXBlOiAic3VjY2VzcyIsIG1lc3NhZ2U6ICLnmbvlvZXmiJDlip8iLCBkdXJhdGlvbjoxMDB9KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoYXQuJHRvYXN0KHsgdHlwZTogImVycm9yIiwgbWVzc2FnZTogcmVzLm1lc3NhZ2UsIGR1cmF0aW9uOjEwMH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIC8vIOmqjOivgeWksei0pe+8jOaYvuekuumqjOivgeeggQ0KICAgICAgY2FwdGNoYS5zaG93KCk7DQogICAgfSwNCiAgICBxcUxvZ2luKCkgew0KICAgICAgLy/kv53nlZnlvZPliY3ot6/lvoQNCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2F2ZUxvZ2luVXJsIiwgdGhpcy4kcm91dGUucGF0aCk7DQogICAgICBpZiAoDQogICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goDQogICAgICAgICAgLyhpUGhvbmV8aVBvZHxBbmRyb2lkfGlvc3xpT1N8aVBhZHxCYWNrZXJyeXxXZWJPU3xTeW1iaWFufFdpbmRvd3MgUGhvbmV8UGhvbmUpL2kNCiAgICAgICAgKQ0KICAgICAgKSB7DQogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZg0KICAgICAgICBRQy5Mb2dpbi5zaG93UG9wdXAoew0KICAgICAgICAgIGFwcElkOiB0aGlzLmNvbmZpZy5RUV9BUFBfSUQsDQogICAgICAgICAgcmVkaXJlY3RVUkk6IHRoaXMuY29uZmlnLlFRX1JFRElSRUNUX1VSSQ0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHdpbmRvdy5vcGVuKA0KICAgICAgICAgICJodHRwczovL2dyYXBoLnFxLmNvbS9vYXV0aDIuMC9zaG93P3doaWNoPUxvZ2luJmRpc3BsYXk9cGMmY2xpZW50X2lkPSIgKw0KICAgICAgICAgICAgK3RoaXMuY29uZmlnLlFRX0FQUF9JRCArDQogICAgICAgICAgICAiJnJlc3BvbnNlX3R5cGU9dG9rZW4mc2NvcGU9YWxsJnJlZGlyZWN0X3VyaT0iICsNCiAgICAgICAgICAgIHRoaXMuY29uZmlnLlFRX1JFRElSRUNUX1VSSSwNCiAgICAgICAgICAiX3NlbGYiDQogICAgICAgICk7DQogICAgICB9DQogICAgfSwNCiAgICB3ZWlib0xvZ2luKCkgew0KICAgICAgLy/kv53nlZnlvZPliY3ot6/lvoQNCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2F2ZUxvZ2luVXJsIiwgdGhpcy4kcm91dGUucGF0aCk7DQogICAgICB3aW5kb3cub3BlbigNCiAgICAgICAgImh0dHBzOi8vYXBpLndlaWJvLmNvbS9vYXV0aDIvYXV0aG9yaXplP2NsaWVudF9pZD0iICsNCiAgICAgICAgICB0aGlzLmNvbmZpZy5XRUlCT19BUFBfSUQgKw0KICAgICAgICAgICImcmVzcG9uc2VfdHlwZT1jb2RlJnJlZGlyZWN0X3VyaT0iICsNCiAgICAgICAgICB0aGlzLmNvbmZpZy5XRUlCT19SRURJUkVDVF9VUkksDQogICAgICAgICJfc2VsZiINCiAgICAgICk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["LoginModel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginModel.vue","sourceRoot":"src/components/model","sourcesContent":["<template>\r\n  <v-dialog v-model=\"loginFlag\" :fullscreen=\"isMobile\" max-width=\"460\">\r\n    <v-card class=\"login-container\" style=\"border-radius:4px\">\r\n      <v-icon\r\n              class=\"float-right\"\r\n              style=\"color: black\"\r\n              @click=\"loginFlag = false\">\r\n        mdi-close\r\n      </v-icon>\r\n      <div class=\"login-wrapper\">\r\n        <!-- 用户名 -->\r\n        <v-text-field\r\n          v-model=\"username\"\r\n          label=\"邮箱号\"\r\n          placeholder=\"请输入您的邮箱号\"\r\n          clearable\r\n          @keyup.enter=\"login\"\r\n        />\r\n        <!-- 密码 -->\r\n        <v-text-field\r\n          v-model=\"password\"\r\n          class=\"mt-7\"\r\n          label=\"密码\"\r\n          placeholder=\"请输入您的密码\"\r\n          @keyup.enter=\"login\"\r\n          :append-icon=\"show ? 'mdi-eye' : 'mdi-eye-off'\"\r\n          :type=\"show ? 'text' : 'password'\"\r\n          @click:append=\"show = !show\"\r\n        />\r\n        <!-- 按钮 -->\r\n        <v-btn\r\n          class=\"mt-7\"\r\n          block\r\n          color=\"blue\"\r\n          style=\"color:#fff\"\r\n          @click=\"login\"\r\n        >\r\n          登录\r\n        </v-btn>\r\n        <!-- 注册和找回密码 -->\r\n        <div class=\"mt-10 login-tip\">\r\n          <span @click=\"openRegister\">立即注册</span>\r\n          <span @click=\"openForget\" class=\"float-right\">忘记密码?</span>\r\n        </div>\r\n        <div v-if=\"socialLoginList.length > 0\">\r\n          <div class=\"social-login-title\">社交账号登录</div>\r\n          <div class=\"social-login-wrapper\">\r\n            <!-- 微博登录 -->\r\n            <a\r\n              v-if=\"showLogin('weibo')\"\r\n              class=\"mr-3 iconfont iconweibo\"\r\n              style=\"color:#e05244\"\r\n              @click=\"weiboLogin\"\r\n            />\r\n            <!-- qq登录 -->\r\n            <a\r\n              v-if=\"showLogin('qq')\"\r\n              class=\"iconfont iconqq\"\r\n              style=\"color:#00AAEE\"\r\n              @click=\"qqLogin\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </v-card>\r\n  </v-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {emailLogin} from \"../../api/user\";\r\n\r\nexport default {\r\n  data: function() {\r\n    return {\r\n      username: \"\",\r\n      password: \"\",\r\n      show: false\r\n    };\r\n  },\r\n  computed: {\r\n    loginFlag: {\r\n      set(value) {\r\n        this.$store.state.loginFlag = value;\r\n      },\r\n      get() {\r\n        return this.$store.state.loginFlag;\r\n      }\r\n    },\r\n    isMobile() {\r\n      const clientWidth = document.documentElement.clientWidth;\r\n      if (clientWidth > 960) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    socialLoginList() {\r\n      return this.$store.state.blogInfo.websiteConfig.socialLoginList;\r\n    },\r\n    showLogin() {\r\n      return function(type) {\r\n        return this.socialLoginList.indexOf(type) !== -1;\r\n      };\r\n    }\r\n  },\r\n  methods: {\r\n    openRegister() {\r\n      this.$store.state.loginFlag = false;\r\n      this.$store.state.registerFlag = true;\r\n    },\r\n    openForget() {\r\n      this.$store.state.loginFlag = false;\r\n      this.$store.state.forgetFlag = true;\r\n    },\r\n    login() {\r\n      var reg = /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\r\n      if (!reg.test(this.username)) {\r\n        this.$toast({ type: \"error\", message: \"邮箱格式不正确\" });\r\n        return false;\r\n      }\r\n      if (this.password.trim().length === 0) {\r\n        this.$toast({ type: \"error\", message: \"密码不能为空\" });\r\n        return false;\r\n      }\r\n      const that = this;\r\n      // eslint-disable-next-line no-undef\r\n      var captcha = new TencentCaptcha(that.config.TENCENT_CAPTCHA, function(res) {\r\n        if (res.ret === 0) {\r\n          //发送登录请求\r\n          let param = new URLSearchParams();\r\n          param.append(\"username\", that.username);\r\n          param.append(\"password\", that.password);\r\n          param.append(\"loginType\", 1);\r\n          emailLogin({\r\n            username: that.username,\r\n            password: that.password,\r\n            loginType: 1\r\n          }).then(res => {\r\n            console.log('登录res',res)\r\n            if (res.code === 200) {\r\n\r\n              that.username = \"\";\r\n              that.password = \"\";\r\n              console.log(\"data\", res.data)\r\n              that.$store.commit(\"login\", res.data.userInfo);\r\n              that.$store.commit(\"closeModel\");\r\n              that.$toast({ type: \"success\", message: \"登录成功\", duration:100});\r\n            } else {\r\n              that.$toast({ type: \"error\", message: res.message, duration:100});\r\n            }\r\n          });\r\n        }\r\n      });\r\n      // 验证失败，显示验证码\r\n      captcha.show();\r\n    },\r\n    qqLogin() {\r\n      //保留当前路径\r\n      this.$store.commit(\"saveLoginUrl\", this.$route.path);\r\n      if (\r\n        navigator.userAgent.match(\r\n          /(iPhone|iPod|Android|ios|iOS|iPad|Backerry|WebOS|Symbian|Windows Phone|Phone)/i\r\n        )\r\n      ) {\r\n        // eslint-disable-next-line no-undef\r\n        QC.Login.showPopup({\r\n          appId: this.config.QQ_APP_ID,\r\n          redirectURI: this.config.QQ_REDIRECT_URI\r\n        });\r\n      } else {\r\n        window.open(\r\n          \"https://graph.qq.com/oauth2.0/show?which=Login&display=pc&client_id=\" +\r\n            +this.config.QQ_APP_ID +\r\n            \"&response_type=token&scope=all&redirect_uri=\" +\r\n            this.config.QQ_REDIRECT_URI,\r\n          \"_self\"\r\n        );\r\n      }\r\n    },\r\n    weiboLogin() {\r\n      //保留当前路径\r\n      this.$store.commit(\"saveLoginUrl\", this.$route.path);\r\n      window.open(\r\n        \"https://api.weibo.com/oauth2/authorize?client_id=\" +\r\n          this.config.WEIBO_APP_ID +\r\n          \"&response_type=code&redirect_uri=\" +\r\n          this.config.WEIBO_REDIRECT_URI,\r\n        \"_self\"\r\n      );\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.social-login-title {\r\n  margin-top: 1.5rem;\r\n  color: #b5b5b5;\r\n  font-size: 0.75rem;\r\n  text-align: center;\r\n}\r\n.social-login-title::before {\r\n  content: \"\";\r\n  display: inline-block;\r\n  background-color: #d8d8d8;\r\n  width: 60px;\r\n  height: 1px;\r\n  margin: 0 12px;\r\n  vertical-align: middle;\r\n}\r\n.social-login-title::after {\r\n  content: \"\";\r\n  display: inline-block;\r\n  background-color: #d8d8d8;\r\n  width: 60px;\r\n  height: 1px;\r\n  margin: 0 12px;\r\n  vertical-align: middle;\r\n}\r\n.social-login-wrapper {\r\n  margin-top: 1rem;\r\n  font-size: 2rem;\r\n  text-align: center;\r\n}\r\n.social-login-wrapper a {\r\n  text-decoration: none;\r\n}\r\n</style>\r\n"]}]}